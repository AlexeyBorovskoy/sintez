# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ SCN –≤ SNMP –∑–∞–ø—Ä–æ—Å–∞—Ö

**–î–∞—Ç–∞:** 2026-02-03  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–æ

---

## üìã –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `buildOIDWithSCN()`

**–§–∞–π–ª:** `src/object_manager.cpp`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ OID —Å SCN –¥–ª—è —Ç–∞–±–ª–∏—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

**–§–æ—Ä–º–∞—Ç OID:**
```
BASE_OID.timestamp.SCN_ASCII_CODES
```

–ì–¥–µ:
- `BASE_OID` - –±–∞–∑–æ–≤—ã–π OID —Ç–∞–±–ª–∏—á–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `1.3.6.1.4.1.13267.3.2.4.2.1.5`)
- `timestamp` = `1` (–æ–∑–Ω–∞—á–∞–µ—Ç "NOW" - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
- `SCN_ASCII_CODES` - ASCII –∫–æ–¥—ã —Å–∏–º–≤–æ–ª–æ–≤ SCN

**–ü—Ä–∏–º–µ—Ä –¥–ª—è SCN="CO11111":**
```
1.3.6.1.4.1.13267.3.2.4.2.1.5.1.67.79.49.49.49.49.49
```

–ì–¥–µ:
- `1` = timestamp (NOW)
- `67` = ASCII –∫–æ–¥ 'C'
- `79` = ASCII –∫–æ–¥ 'O'
- `49` = ASCII –∫–æ–¥ '1' (–ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è 5 —Ä–∞–∑)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```cpp
std::string SpectrObject::buildOIDWithSCN(const std::string& baseOID) {
    if (config_.siteId.empty()) {
        // –ï—Å–ª–∏ SCN –Ω–µ –∑–∞–¥–∞–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –±–∞–∑–æ–≤—ã–π OID (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
        return baseOID;
    }
    
    std::string oid = baseOID + ".1";  // timestamp = 1 (NOW)
    
    // –î–æ–±–∞–≤–ª—è–µ–º ASCII –∫–æ–¥—ã —Å–∏–º–≤–æ–ª–æ–≤ SCN
    for (char c : config_.siteId) {
        oid += "." + std::to_string(static_cast<unsigned char>(c));
    }
    
    return oid;
}
```

---

### 2. –û–±–Ω–æ–≤–ª–µ–Ω `setPhase()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∞–∑—ã

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `buildOIDWithSCN(SNMPOID::UTC_CONTROL_FN)` –≤–º–µ—Å—Ç–æ `SNMPOID::UTC_CONTROL_FN`
- –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç SCN –≤ OID —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–ë—ã–ª–æ:**
```cpp
phaseVarbind.oid = SNMPOID::UTC_CONTROL_FN;  // "1.3.6.1.4.1.13267.3.2.4.2.1.5"
```

**–°—Ç–∞–ª–æ:**
```cpp
phaseVarbind.oid = buildOIDWithSCN(SNMPOID::UTC_CONTROL_FN);
// –î–ª—è SCN="CO11111": "1.3.6.1.4.1.13267.3.2.4.2.1.5.1.67.79.49.49.49.49.49"
```

---

### 3. –û–±–Ω–æ–≤–ª–µ–Ω `setYF()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∂–µ–ª—Ç–æ–≥–æ –º–∏–≥–∞–Ω–∏—è

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `buildOIDWithSCN(SNMPOID::UTC_CONTROL_FF)` –≤–º–µ—Å—Ç–æ `SNMPOID::UTC_CONTROL_FF`
- –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç SCN –≤ OID —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–ë—ã–ª–æ:**
```cpp
ffVarbind.oid = SNMPOID::UTC_CONTROL_FF;  // "1.3.6.1.4.1.13267.3.2.4.2.1.20"
```

**–°—Ç–∞–ª–æ:**
```cpp
ffVarbind.oid = buildOIDWithSCN(SNMPOID::UTC_CONTROL_FF);
// –î–ª—è SCN="CO11111": "1.3.6.1.4.1.13267.3.2.4.2.1.20.1.67.79.49.49.49.49.49"
```

---

### 4. –û–±–Ω–æ–≤–ª–µ–Ω `setOS()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞ "–í—Å–µ –≤—ã–∫–ª—é—á–µ–Ω–æ"

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `buildOIDWithSCN(SNMPOID::UTC_CONTROL_LO)` –≤–º–µ—Å—Ç–æ `SNMPOID::UTC_CONTROL_LO`
- –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç SCN –≤ OID —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–ë—ã–ª–æ:**
```cpp
loVarbind.oid = SNMPOID::UTC_CONTROL_LO;  // "1.3.6.1.4.1.13267.3.2.4.2.1.11"
```

**–°—Ç–∞–ª–æ:**
```cpp
loVarbind.oid = buildOIDWithSCN(SNMPOID::UTC_CONTROL_LO);
// –î–ª—è SCN="CO11111": "1.3.6.1.4.1.13267.3.2.4.2.1.11.1.67.79.49.49.49.49.49"
```

---

### 5. –û–±–Ω–æ–≤–ª–µ–Ω `setLocal()` - –≤–æ–∑–≤—Ä–∞—Ç –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `buildOIDWithSCN()` –¥–ª—è `UTC_CONTROL_LO` –∏ `UTC_CONTROL_FF`
- –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç SCN –≤ OID —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

### 6. –û–±–Ω–æ–≤–ª–µ–Ω `setStart()` - –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `buildOIDWithSCN()` –¥–ª—è `UTC_CONTROL_FN + ".5"`
- –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç SCN –≤ OID —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π OID `UTC_CONTROL_FN + ".5"`, —á—Ç–æ –¥–∞–µ—Ç `"1.3.6.1.4.1.13267.3.2.4.2.1.5.5"`. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π, —Ç—Ä–µ–±—É—é—â–∏–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏.

---

## üîç –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ò–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

1. **Excel —Ñ–∞–π–ª `Sintez_snmp_protocols.xlsx`:**
   - SetPhase: `1.3.6.1.4.1.13267.3.2.4.2.1.5 + SCN`
   - SetAF: `1.3.6.1.4.1.13267.3.2.4.2.1.20 + SCN`

2. **MIB —Ñ–∞–π–ª `UTMC-UTMCFULLUTCTYPE2-MIB`:**
   - `utcControlTable` –∏–º–µ–µ—Ç –∏–Ω–¥–µ–∫—Å: `{utcControlTimeStamp, utcControlSiteID}`
   - `utcControlTimeStamp` = 1 –æ–∑–Ω–∞—á–∞–µ—Ç "NOW"
   - `utcControlSiteID` - —ç—Ç–æ SCN

3. **protocol.txt:**
   - "OID —Å –∏–º–µ–Ω–∞–º–∏ 'SetPhase', 'SetAF' —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø–µ—Ä–µ–¥–∞—á–µ–π SCN"

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

- ‚úÖ –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ SCN –≤–æ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö SET
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ (–µ—Å–ª–∏ SCN –Ω–µ –∑–∞–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π OID)

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å SetPhase —Å SCN:**
   ```bash
   # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å test_controller –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
   ./build/test_controller set 192.168.75.150 UTMC \
     1.3.6.1.4.1.13267.3.2.4.2.1.5.1.67.79.49.49.49.49.49 \
     4 "$(printf '\x01')"
   ```

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å SetAF —Å SCN:**
   ```bash
   ./build/test_controller setmulti 192.168.75.150 UTMC \
     1.3.6.1.4.1.13267.3.2.4.1 2 3 \
     1.3.6.1.4.1.13267.3.2.4.2.1.20.1.67.79.49.49.49.49.49 2 1
   ```

3. **–í–∏–∑—É–∞–ª—å–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Ä–∞–±–æ—Ç—É:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É —Ñ–∞–∑—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∫–ª—é—á–µ–Ω–∏–µ –∂–µ–ª—Ç–æ–≥–æ –º–∏–≥–∞–Ω–∏—è

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **SCN –∏–∑ config.json:** `CO11111`
2. **–§–æ—Ä–º–∞—Ç SCN:** `COX`, –≥–¥–µ X - —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 9999
3. **Timestamp:** –í—Å–µ–≥–¥–∞ `1` (NOW) –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –ï—Å–ª–∏ SCN –Ω–µ –∑–∞–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π OID

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `SCN_ANALYSIS.md` - –ê–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–¥–∞—á–∏ SCN
- `DOCUMENTATION_ANALYSIS_COMPLETE.md` - –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- `YELLOW_FLASHING_ANALYSIS.md` - –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —Å –∂–µ–ª—Ç—ã–º –º–∏–≥–∞–Ω–∏–µ–º
