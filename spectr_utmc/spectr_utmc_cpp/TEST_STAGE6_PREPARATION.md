# Результаты подготовки Этапа 6: Тестирование SET операций

**Дата:** 2026-02-03  
**Контроллер:** 192.168.75.150  
**Community:** UTMC  
**Этап:** Подготовка (Шаг 6.1)

---

## ⚠️ ВАЖНО: Безопасность

**Все SET операции изменяют состояние контроллера и могут повлиять на его работу!**  
**Выполнять ТОЛЬКО после согласования и с возможностью быстрого отката!**

---

## Шаг 6.1: Фиксация текущего состояния контроллера

### ✅ Результаты чтения текущего состояния

#### 1. Operation Mode (Режим работы)
- **OID:** `1.3.6.1.4.1.13267.3.2.4.1`
- **Текущее значение:** `INTEGER: 2`
- **Интерпретация:** Режим **Monitor (2)**
- **Возможные значения:**
  - `1` = Standalone (автономный режим)
  - `2` = Monitor (мониторинг)
  - `3` = UTC Control (удаленное управление)

#### 2. Current Phase (Текущая фаза)
- **OID:** `1.3.6.1.4.1.13267.3.2.5.1.1.3`
- **Текущее значение:** `Hex-STRING: 08`
- **Интерпретация:** Битовая маска текущей фазы
- **Расшифровка:** `08` в hex = `00001000` в binary = фаза 4 активна

#### 3. ЖМ (Желтое мигание)
- **OID:** `1.3.6.1.4.1.13267.3.2.5.1.1.36`
- **Текущее значение:** `INTEGER: 0`
- **Интерпретация:** Желтое мигание **выключено** (0 = выключено, 1 = включено)

---

## Текущее состояние контроллера (для отката)

```
Operation Mode: 2 (Monitor)
Current Phase: Hex-STRING: 08 (фаза 4)
ЖМ (желтое мигание): 0 (выключено)
```

**Важно:** Эти значения нужно использовать для отката изменений, если SET операции изменят состояние контроллера.

---

## Анализ текущего состояния

### Режим работы: Monitor (2)

**Особенности режима Monitor:**
- Контроллер находится в режиме мониторинга
- В этом режиме контроллер может принимать команды, но не все SET операции могут быть доступны
- Для полного тестирования SET операций может потребоваться режим UTC Control (3)

**Ограничения для SET операций:**
- SET Operation Mode: Можно попытаться перевести в режим UTC Control (3)
- SET Phase: Может быть недоступно в режиме Monitor, требуется режим UTC Control (3)
- SET AF (ЖМ): Может быть доступно, но требует осторожности

---

## Рекомендации для дальнейшего тестирования

### ⚠️ Важные замечания:

1. **Режим Monitor (2):**
   - Контроллер в режиме мониторинга
   - Некоторые SET операции могут быть недоступны
   - Для полного тестирования может потребоваться перевод в режим UTC Control (3)

2. **Безопасность SET операций:**
   - Все SET операции изменяют состояние контроллера
   - Выполнять по одной операции с проверкой результата
   - После каждой операции проверять текущее состояние
   - При необходимости выполнять откат к исходному состоянию

3. **Порядок тестирования SET операций:**
   - Начать с наименее опасных операций
   - Проверять результат после каждой операции
   - Иметь возможность отката

---

## Следующие шаги (Этап 6)

### Шаг 6.2: Тестирование SET Operation Mode (⚠️ ОПАСНО)

**Цель:** Попытка перевести контроллер в режим UTC Control (3)

**Текущее состояние:** Operation Mode = 2 (Monitor)  
**Целевое состояние:** Operation Mode = 3 (UTC Control)

**⚠️ ОПАСНОСТЬ:** Может изменить режим работы контроллера

**Рекомендация:** 
- Выполнять только с разрешения
- После выполнения немедленно проверить результат
- Иметь возможность отката к режиму Monitor (2)

**Команда для выполнения:**
```bash
./build/test_controller set 192.168.75.150 UTMC 1.3.6.1.4.1.13267.3.2.4.1 2 3
```

**Команда для проверки результата:**
```bash
./build/test_controller get 192.168.75.150 UTMC 1.3.6.1.4.1.13267.3.2.4.1
```

**Команда для отката (если нужно вернуться к Monitor):**
```bash
./build/test_controller set 192.168.75.150 UTMC 1.3.6.1.4.1.13267.3.2.4.1 2 2
```

---

### Шаг 6.3: Тестирование SET Phase (⚠️ ОПАСНО)

**Цель:** Попытка установить фазу (только если контроллер в режиме UTC Control)

**⚠️ ОПАСНОСТЬ:** Может изменить текущую фазу светофора

**Рекомендация:** 
- Выполнять ТОЛЬКО после успешного перевода в режим UTC Control (3)
- Выполнять только с разрешения
- После выполнения немедленно проверить результат

**Примечание:** Этот шаг будет доступен только после успешного выполнения Шага 6.2

---

### Шаг 6.4: Тестирование SET AF (ЖМ) (⚠️ ОПАСНО)

**Цель:** Попытка включить желтое мигание

**⚠️ ОПАСНОСТЬ:** Может включить желтое мигание на светофоре

**Рекомендация:** 
- Выполнять только с разрешения
- После выполнения немедленно проверить результат
- Иметь возможность отката (выключить ЖМ)

---

## Статус этапа

✅ **Шаг 6.1 завершен**

- Текущее состояние контроллера зафиксировано
- Готово к тестированию SET операций
- Имеется план отката изменений

---

## Вопрос для пользователя

**Готовы ли вы продолжить с тестированием SET операций?**

**Следующий шаг:** Шаг 6.2 - Тестирование SET Operation Mode (перевод в режим UTC Control)

**⚠️ ВНИМАНИЕ:** Это изменит режим работы контроллера с Monitor (2) на UTC Control (3)
