# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ C++ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º Node.js –∫–æ–¥–æ–º

## –ê–Ω–∞–ª–∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ Node.js –∫–æ–¥–∞

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ OID –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ:

–ò–∑ –¥–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ `spectr_utmc.js`:

```javascript
i(l,"utmc","1.3.6.1.4.1.13267")
i(l,"utcReplyEntry",l.utmc+".3.2.5.1.1")
i(l,"utcReplyGn",l.utcReplyEntry+".3")
i(l,"utcReplySDn",l.utcReplyEntry+".14")
i(l,"utcReplyMC",l.utcReplyEntry+".15")
i(l,"utcReplyFR",l.utcReplyEntry+".36")
i(l,"utcReplyByException",l.utmc+".3.2.6.1")
i(l,"utcType2OperationMode",l.utmc+".3.2.4.1")  // –ë–ï–ó .0!
i(l,"utcControlEntry",l.utmc+".3.2.4.2.1")
i(l,"utcControlFn",l.utcControlEntry+".5")
i(l,"utcControlLO",l.utcControlEntry+".11")
i(l,"utcControlFF",l.utcControlEntry+".20")
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ:

1. **GET –∑–∞–ø—Ä–æ—Å –¥–ª—è —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã:**
```javascript
session.get([l.utcType2OperationMode], ((e,t)=>r.processResponse(e,t)))
```
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `l.utcType2OperationMode` –ë–ï–ó `.0`
   - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Node.js SNMP –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å `.0` –¥–ª—è —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

2. **SET –∑–∞–ø—Ä–æ—Å –¥–ª—è —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã:**
```javascript
SET_PHASE(e,t){
    return this.set(e,[
        {oid:l.utcType2OperationMode,type:u,value:3},
        {oid:l.utcControlFn,type:c,value:Buffer.of(1<<r-1)}
    ])
}
```
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ë–ï–ó `.0` –≤ SET –æ–ø–µ—Ä–∞—Ü–∏—è—Ö

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ traps:**
```javascript
[l.utcType2OperationMode]:(e,t)=>{t.controlSource=3===e?3:1}
```
   - –í traps —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑ `.0`

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å C++ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π

### ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ:

1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ OID:**
   - **Node.js:** `l.utmc+".3.2.4.1"` = `"1.3.6.1.4.1.13267.3.2.4.1"`
   - **C++:** `UTMC + ".3.2.4.1"` = `"1.3.6.1.4.1.13267.3.2.4.1"` ‚úÖ

2. **Community string:**
   - **Node.js:** `"UTMC"` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - **C++:** `"UTMC"` (–∏–∑ config.json) ‚úÖ

3. **SET –æ–ø–µ—Ä–∞—Ü–∏—è SET_PHASE:**
   - **Node.js:** 
     ```javascript
     {oid:l.utcType2OperationMode,type:u,value:3}
     {oid:l.utcControlFn,type:c,value:Buffer.of(1<<r-1)}
     ```
   - **C++:**
     ```cpp
     modeVarbind.oid = SNMPOID::UTC_TYPE2_OPERATION_MODE;  // –ë–ï–ó .0
     phaseVarbind.oid = SNMPOID::UTC_CONTROL_FN;
     ```
   ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç

### ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞!

**–í –æ—Ä–∏–≥–∏–Ω–∞–ª–µ Node.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è OID –ë–ï–ó `.0`:**
- `l.utcType2OperationMode` = `"1.3.6.1.4.1.13267.3.2.4.1"` (–±–µ–∑ `.0`)

**–í C++ –∫–æ–¥–µ:**
- –í `object_manager.cpp` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ë–ï–ó `.0` ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
- –í `test_controller.cpp` —è –¥–æ–±–∞–≤–∏–ª `.0` ‚ö†Ô∏è **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!**

**–í—ã–≤–æ–¥:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ net-snmp —Ç—Ä–µ–±—É–µ—Ç `.0` –¥–ª—è —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏ GET –∑–∞–ø—Ä–æ—Å–∞—Ö, –Ω–æ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ Node.js –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –≤–µ—Ä–æ—è—Ç–Ω–æ, –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OID –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ

### GET –∑–∞–ø—Ä–æ—Å—ã:

–í –æ—Ä–∏–≥–∏–Ω–∞–ª–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
```javascript
session.get([l.utcType2OperationMode], callback)
```

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `net-snmp` –¥–ª—è Node.js –º–æ–∂–µ—Ç:
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å `.0` –¥–ª—è —Å–∫–∞–ª—è—Ä–Ω—ã—Ö OID
2. –ò–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ —Å–∫–∞–ª—è—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

### SET –∑–∞–ø—Ä–æ—Å—ã:

–í –æ—Ä–∏–≥–∏–Ω–∞–ª–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
```javascript
{oid:l.utcType2OperationMode,type:u,value:3}
```

SET –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –ë–ï–ó `.0` –¥–ª—è —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.

---

## –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ C++:

1. **–î–ª—è GET –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–∫–∞–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:**
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å `.0` –≤—Ä—É—á–Ω—É—é (–∫–∞–∫ —è —Å–¥–µ–ª–∞–ª –≤ test_controller.cpp)
   - –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ net-snmp

2. **–î–ª—è SET –∑–∞–ø—Ä–æ—Å–æ–≤:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ë–ï–ó `.0` (–∫–∞–∫ –≤ object_manager.cpp)
   - –≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—É

3. **–í object_manager.cpp:**
   - `requestOperationMode()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ë–ï–ó `.0` ‚ö†Ô∏è
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `.0` –¥–ª—è GET –∑–∞–ø—Ä–æ—Å–∞!

### üîß –¢—Ä–µ–±—É–µ–º—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **object_manager.cpp, —Å—Ç—Ä–æ–∫–∞ 493:**
   ```cpp
   // –ë–´–õ–û:
   std::vector<std::string> oids = {SNMPOID::UTC_TYPE2_OPERATION_MODE};
   
   // –î–û–õ–ñ–ù–û –ë–´–¢–¨:
   std::vector<std::string> oids = {SNMPOID::UTC_TYPE2_OPERATION_MODE + ".0"};
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä—É–≥–∏–µ GET –∑–∞–ø—Ä–æ—Å—ã:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Å–∫–∞–ª—è—Ä–Ω—ã–µ OID –∏–º–µ—é—Ç `.0` –≤ GET –∑–∞–ø—Ä–æ—Å–∞—Ö
   - SET –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ë–ï–ó `.0`

---

## –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

| –û–ø–µ—Ä–∞—Ü–∏—è | Node.js | C++ (—Ç–µ–∫—É—â–∏–π) | C++ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å) | –°—Ç–∞—Ç—É—Å |
|----------|---------|---------------|-------------------|--------|
| GET utcType2OperationMode | –ë–µ–∑ .0 (–∞–≤—Ç–æ) | –ë–µ–∑ .0 | **–° .0** | ‚ö†Ô∏è –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å |
| SET utcType2OperationMode | –ë–µ–∑ .0 | –ë–µ–∑ .0 | –ë–µ–∑ .0 | ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ |
| GET –≤ test_controller | - | –° .0 | –° .0 | ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ |
| Community | "UTMC" | "UTMC" | "UTMC" | ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ |

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å `requestOperationMode()` –≤ object_manager.cpp
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –¥—Ä—É–≥–∏–µ GET –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `.0`
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ SET –∑–∞–ø—Ä–æ—Å—ã –æ—Å—Ç–∞—é—Ç—Å—è –ë–ï–ó `.0`
