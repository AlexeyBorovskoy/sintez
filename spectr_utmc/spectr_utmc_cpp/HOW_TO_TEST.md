# Как использовать план тестирования

## Структура файлов

1. **`TEST_PLAN.md`** - Полный детальный план тестирования со всеми шагами
2. **`TEST_PLAN_SHORT.md`** - Краткая версия для быстрого старта
3. **`run_test_step.sh`** - Скрипт для выполнения отдельных шагов
4. **`test_connection.sh`** - Интерактивный скрипт для тестирования

## Подход к тестированию

### Методология "один тест - один анализ"

1. **Выполнить один тест** из плана
2. **Проанализировать результат**
3. **Зафиксировать выводы**
4. **При необходимости внести изменения**
5. **Перейти к следующему тесту**

## Быстрый старт

### Вариант 1: Использование скрипта для одного шага

```bash
cd /home/alexey/shared_vm/spectr_utmc/spectr_utmc/spectr_utmc_cpp

# Выполнить конкретный шаг
./run_test_step.sh 0.1    # Проверка доступности
./run_test_step.sh 1.1    # Тест community string
./run_test_step.sh full   # Полный тест подключения
```

### Вариант 2: Ручное выполнение по плану

1. Откройте `TEST_PLAN.md`
2. Найдите нужный шаг тестирования
3. Выполните команду из плана
4. Заполните результаты в плане
5. Проанализируйте результат
6. При необходимости внесите изменения в код
7. Перейдите к следующему шагу

## Пример работы с планом

### Шаг 1: Выбор теста

Откройте `TEST_PLAN.md` и выберите первый непройденный тест, например:
- **Этап 1, Шаг 1.1:** Определение правильного community string

### Шаг 2: Выполнение теста

```bash
./run_test_step.sh 1.1
# или вручную:
./build/test_controller connect 192.168.75.150 UTMC
```

### Шаг 3: Анализ результата

Проверьте вывод команды:
- ✅ Успешно: Сессия создана, данные получены
- ❌ Ошибка: Не удалось создать сессию или получить данные

### Шаг 4: Запись результатов

В файле `TEST_PLAN.md` отметьте:
- [x] Выполнено
- Фактический результат: "Сессия создана успешно, получен sysUpTime"
- Статус: ⬜ Успешно
- Примечания: "Community 'UTMC' работает корректно"

### Шаг 5: Выводы и изменения

Если тест прошел успешно:
- Переходите к следующему шагу

Если тест не прошел:
- Проанализируйте причину ошибки
- При необходимости внесите изменения в код
- Пересоберите проект
- Повторите тест

## Рекомендуемый порядок тестирования

1. **Этап 0** - Подготовка (обязательно)
2. **Этап 1** - Базовое SNMP подключение (обязательно)
3. **Этап 2** - SNMP GET операции (обязательно)
4. **Этап 3** - SNMP SET операции (осторожно, только если разрешено)
5. **Этап 4** - SNMP Traps (если контроллер настроен)
6. **Этап 5** - Протокол Spectr-ITS (если ITS сервер доступен)
7. **Этап 6** - Интеграционное тестирование
8. **Этап 7** - Анализ и выводы

## Советы

1. **Не пропускайте шаги** - каждый тест важен для понимания системы
2. **Документируйте все** - записывайте результаты даже если тест не прошел
3. **Анализируйте ошибки** - понимание причины ошибки важнее успешного прохождения
4. **Делайте паузы** - между этапами анализируйте накопленные данные
5. **Сохраняйте логи** - все выводы команд сохраняйте для последующего анализа

## Отслеживание прогресса

В файле `TEST_PLAN.md` отмечайте выполненные шаги:
- [x] - Тест выполнен
- ⬜ Успешно - Тест прошел успешно
- ⬜ Ошибка - Тест не прошел, требуется исправление
- ⬜ Пропущено - Тест пропущен по уважительной причине

## Получение помощи

Если тест не проходит:
1. Проверьте раздел "Диагностика проблем" в `TESTING.md`
2. Проверьте логи и выводы команд
3. Убедитесь, что контроллер доступен и настроен правильно
4. При необходимости обратитесь к документации контроллера
