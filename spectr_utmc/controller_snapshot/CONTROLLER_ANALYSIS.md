# ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð· ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð° SINTEZ UTMC

**Ð”Ð°Ñ‚Ð° Ð°Ð½Ð°Ð»Ð¸Ð·Ð°:** 2026-02-03  
**IP ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð°:** 192.168.75.150  
**Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð°:** Raspbian GNU/Linux 10 (buster) Ð½Ð° Raspberry Pi 3B

---

## ðŸ“‹ Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ

### ÐžÐ¡ Ð¸ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ
- **ÐžÐ¡:** Raspbian GNU/Linux 10 (buster)
- **Ð¯Ð´Ñ€Ð¾:** Linux sintez-lite-3b 5.10.63-v7+ #1459 SMP Wed Oct 6 16:41:10 BST 2021 armv7l
- **ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°:** ARMv7 (Raspberry Pi 3B)
- **Uptime:** ~23 Ð´Ð½Ñ (200325539 Ñ‚Ð¸ÐºÐ¾Ð²)

### Ð¡ÐµÑ‚ÐµÐ²Ñ‹Ðµ ÑÐµÑ€Ð²Ð¸ÑÑ‹
- **HTTP:** nginx/1.14.2 (Ð¿Ð¾Ñ€Ñ‚ 80, Ñ€ÐµÐ´Ð¸Ñ€ÐµÐºÑ‚ Ð½Ð° HTTPS)
- **SSH:** OpenSSH (Ð¿Ð¾Ñ€Ñ‚ 22)
- **SNMP:** snmpd + ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ð¹ snmp_agent

---

## ðŸ”§ ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ ÑÐµÑ€Ð²Ð¸ÑÑ‹ (systemd)

### ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÑÐµÑ€Ð²Ð¸ÑÑ‹ UTMC/SINTEZ:

1. **spectr_utmc.service** âœ… ÐÐšÐ¢Ð˜Ð’Ð•Ð
   - ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: UMTC to Spectr-ITS bridge
   - ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: voicelink
   - Ð Ð°Ð±Ð¾Ñ‡Ð°Ñ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ: `/home/voicelink/scripts/spectr_utmc`
   - ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: `/usr/bin/node spectr_utmc.js config.json`
   - Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: running
   - PID: 458 (29.3% Ð¿Ð°Ð¼ÑÑ‚Ð¸)

2. **snmp_agent.service** âœ… ÐÐšÐ¢Ð˜Ð’Ð•Ð
   - ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: SNMP agent service
   - Ð Ð°Ð±Ð¾Ñ‡Ð°Ñ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ: `/home/voicelink/rtc/snmp_agent`
   - ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: `./snmp_agent`
   - Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: running
   - PID: 463 (82.8% CPU, 2.2% Ð¿Ð°Ð¼ÑÑ‚Ð¸)
   - Nice: 5 (Ð½Ð¸Ð·ÐºÐ¸Ð¹ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚)

3. **snmpd.service** âœ… ÐÐšÐ¢Ð˜Ð’Ð•Ð
   - ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: Simple Network Management Protocol (SNMP) Daemon
   - ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: Debian-snmp
   - ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: `/usr/sbin/snmpd -Lf /dev/null -u Debian-snmp -g Debian-snmp -I -smux mteTrigger mteTriggerConf -f -p /run/snmpd.pid`
   - Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: running
   - PID: 464

4. **resident.service** âœ… ÐÐšÐ¢Ð˜Ð’Ð•Ð
   - ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: Resident service
   - Ð Ð°Ð±Ð¾Ñ‡Ð°Ñ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ: `/home/voicelink/rtc/resident`
   - ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: `./resident`
   - Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: running
   - PID: 357 (88.8% CPU, 2.5% Ð¿Ð°Ð¼ÑÑ‚Ð¸)
   - **Ð’ÐÐ–ÐÐž:** Ð­Ñ‚Ð¾ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð° ÑÐ²ÐµÑ‚Ð¾Ñ„Ð¾Ñ€Ð°

5. **web_admin.service** âœ… ÐÐšÐ¢Ð˜Ð’Ð•Ð
   - ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: Gunicorn instance to serve web_admin
   - ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: `gunicorn --workers 1 --bind unix:web_admin.sock`
   - Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: running

6. **web_detect.service** âœ… ÐÐšÐ¢Ð˜Ð’Ð•Ð
   - ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ: Gunicorn instance to serve web_detect
   - ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: `gunicorn --workers 8 --bind unix:web_detect.sock`
   - Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: running

### Ð”Ñ€ÑƒÐ³Ð¸Ðµ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ ÑÐµÑ€Ð²Ð¸ÑÑ‹:
- **modbus_tcp.service** - Modbus TCP ÑÐµÑ€Ð²Ð¸Ñ
- **traffixtream2.service** - TraffiXtream-2 ÑÐµÑ€Ð²Ð¸Ñ
- **traficam.service** - TrafiCam ÑÐµÑ€Ð²Ð¸Ñ
- **nginx.service** - Ð’ÐµÐ±-ÑÐµÑ€Ð²ÐµÑ€
- **arp_link.service** - ARP link service
- **timestamp.service** - Timestamp service
- **restart_frozen_phase.service** - ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº Ð·Ð°Ð¼Ð¾Ñ€Ð¾Ð¶ÐµÐ½Ð½Ñ‹Ñ… Ñ„Ð°Ð·

---

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ñ„Ð°Ð¹Ð»Ð¾Ð²

### ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ spectr_utmc

**Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:** `/home/voicelink/scripts/spectr_utmc/`

**Ð¤Ð°Ð¹Ð»Ñ‹:**
- `spectr_utmc.js` (139KB) - Ð¼Ð¸Ð½Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ JavaScript ÐºÐ¾Ð´ Ð¼Ð¾ÑÑ‚Ð°
- `config.json` - ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ
- `spectr_utmc.service` - systemd unit Ñ„Ð°Ð¹Ð»

**config.json:**
```json
{
  "its": {
    "//host":"tl.ripas.ru",
    "//port": 3344,
    "host":"192.168.57.3",
    "port": 3364,
    "reconnectTimeout": 10
  },
  "community": "UTMC",
  "objects": [
    { 
      "id":10101, 
      "strid":"Test SINTEZ UTMC", 
      "addr":"127.0.0.1", 
      "//siteId":"CO1111", 
      "fixGroupsOrder": true 
    }
  ]
}
```

**ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð½Ð°Ð±Ð»ÑŽÐ´ÐµÐ½Ð¸Ñ:**
- âœ… `addr: "127.0.0.1"` - ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾
- âœ… `//siteId` - Ð·Ð°ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½ (Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´Ð°ÐµÑ‚ Ð½Ð°Ñˆ Ð°Ð½Ð°Ð»Ð¸Ð·!)
- âœ… `community: "UTMC"` - ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ Ð½Ð°ÑˆÐ¸Ð¼ Ñ‚ÐµÑÑ‚Ð°Ð¼
- âœ… `fixGroupsOrder: true` - Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº Ð³Ñ€ÑƒÐ¿Ð¿

### SNMP ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

**Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ:** `/etc/snmp/`

**Ð¡ÐµÑ€Ð²Ð¸ÑÑ‹:**
1. **snmpd** (ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ SNMP Ð´ÐµÐ¼Ð¾Ð½)
   - ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ: `/etc/snmp/snmp.conf`
   - ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: Debian-snmp

2. **snmp_agent** (ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ð¹ SNMP Ð°Ð³ÐµÐ½Ñ‚)
   - Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ: `/home/voicelink/rtc/snmp_agent`
   - Ð˜ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¹ Ñ„Ð°Ð¹Ð»: `./snmp_agent`
   - Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° CPU (82.8%)

---

## ðŸ” ÐÐ½Ð°Ð»Ð¸Ð· ÐºÐ¾Ð´Ð° spectr_utmc.js

### Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° (Ð¸Ð· Ð¼Ð¸Ð½Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð´Ð°)

ÐšÐ¾Ð´ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹:

1. **SNMP Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ°** (Ð²ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ð°Ñ, Ð¼Ð¸Ð½Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ)
   - ASN.1 Ð¿Ð°Ñ€ÑÐµÑ€
   - SNMP Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» (v2c)
   - OID Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°

2. **OID ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ñ‹** (Ð¸Ð· ÐºÐ¾Ð´Ð°):
```javascript
utmc = "1.3.6.1.4.1.13267"
utcType2OperationMode = utmc + ".3.2.4.1"
utcControlEntry = utmc + ".3.2.4.2.1"
utcControlFn = utcControlEntry + ".5"      // Force bits
utcControlLO = utcControlEntry + ".11"    // Lamps On/Off
utcControlFF = utcControlEntry + ".20"    // Flash mode
utcReplyGn = utmc + ".3.2.5.1.1.3"       // Current stage
```

3. **ÐŸÑ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Spectr-ITS**
   - TCP/IP ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ðµ
   - Ð¢ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Ñ checksum
   - ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹: SET_PHASE, SET_YF, SET_OS, SET_START, GET_STAT, etc.

4. **ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¸ SNMP OID:**
   - `utcReplyGn` - Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ñ„Ð°Ð·Ñ‹ Ð¸Ð· Ð±Ð¸Ñ‚Ð¾Ð²Ð¾Ð¹ Ð¼Ð°ÑÐºÐ¸
   - `utcType2OperationMode` - Ñ€ÐµÐ¶Ð¸Ð¼ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð°
   - `utcReplyFR` - Ñ€ÐµÐ¶Ð¸Ð¼ Ð¼Ð¸Ð³Ð°Ð½Ð¸Ñ
   - `utcReply_vlinkRed` - ÐºÑ€Ð°ÑÐ½Ñ‹Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼
   - `utcReply_vlinkLO` - Ñ€ÐµÐ¶Ð¸Ð¼ Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð»Ð°Ð¼Ð¿

### ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ (Ð¸Ð· Ð°Ð½Ð°Ð»Ð¸Ð·Ð° ÐºÐ¾Ð´Ð°):

```javascript
// SET_PHASE - ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ñ„Ð°Ð·Ñ‹
SET_PHASE(addr, phase) {
  const p = +phase;
  return p > 0 && p < 8 ? this.set(addr, [
    {oid: "1.3.6.1.4.1.13267.3.2.4.1", type: Integer, value: 3},  // operationMode=3
    {oid: "1.3.6.1.4.1.13267.3.2.4.2.1.5", type: OctetString, value: Buffer.of(1 << (p-1))}
  ]) : errBadParam
}

// SET_YF - Ð¶Ñ‘Ð»Ñ‚Ð¾Ðµ Ð¼Ð¸Ð³Ð°Ð½Ð¸Ðµ
SET_YF(addr) {
  return this.set(addr, [
    {oid: "1.3.6.1.4.1.13267.3.2.4.1", type: Integer, value: 3},
    {oid: "1.3.6.1.4.1.13267.3.2.4.2.1.20", type: Integer, value: 1}
  ])
}
```

**Ð’ÐÐ–ÐÐž:** 
- âœ… OID Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ **Ð‘Ð•Ð— SCN** (Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¾!)
- âœ… `siteId` Ð·Ð°ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð² config.json
- âœ… ÐšÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ð¿Ð¾ IP (`addr`)

---

## ðŸ¤– ROS Ð¿Ð°ÐºÐµÑ‚Ñ‹

**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð¿Ð¾Ð¸ÑÐºÐ°:** ROS Ð¿Ð°ÐºÐµÑ‚Ñ‹ **ÐÐ• ÐÐÐ™Ð”Ð•ÐÐ«**

- `/opt/ros` - Ð½Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚ Ð¸Ð»Ð¸ Ð¿ÑƒÑÑ‚
- `~/catkin_ws` - Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½
- ROS ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ (`roscore`, `rospack`, `rosnode`) - Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹
- ROS Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ - Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹

**Ð’Ñ‹Ð²Ð¾Ð´:** ÐšÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€ **ÐÐ• Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ ROS**. Ð­Ñ‚Ð¾ Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€ SINTEZ Ñ ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¼ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð¾Ð¼.

---

## ðŸ“Š ÐŸÑ€Ð¾Ñ†ÐµÑÑÑ‹ Ð¸ Ñ€ÐµÑÑƒÑ€ÑÑ‹

### Ð¢Ð¾Ð¿ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð² Ð¿Ð¾ CPU:
1. **resident** (PID 357) - 88.8% CPU - Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð°
2. **snmp_agent** (PID 463) - 82.8% CPU - SNMP Ð°Ð³ÐµÐ½Ñ‚
3. **restart_frozen_phase** (PID 654) - 6.1% CPU - Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ñ„Ð°Ð·

### Ð¢Ð¾Ð¿ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð² Ð¿Ð¾ Ð¿Ð°Ð¼ÑÑ‚Ð¸:
1. **spectr_utmc.js** (PID 458) - 29.3% Ð¿Ð°Ð¼ÑÑ‚Ð¸ (292MB) - Ð¼Ð¾ÑÑ‚ UTMC
2. **resident** (PID 357) - 2.5% Ð¿Ð°Ð¼ÑÑ‚Ð¸ (25MB)
3. **snmp_agent** (PID 463) - 2.2% Ð¿Ð°Ð¼ÑÑ‚Ð¸ (22MB)

---

## ðŸ” Ð”Ð¾ÑÑ‚ÑƒÐ¿Ñ‹

### Ð’ÐµÐ±-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ:
- URL: `https://192.168.75.150`
- Ð›Ð¾Ð³Ð¸Ð½: `admin`
- ÐŸÐ°Ñ€Ð¾Ð»ÑŒ: `zBCTRuV7`

### SSH:
- ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ: `voicelink`
- ÐŸÐ°Ñ€Ð¾Ð»ÑŒ: `piX47xQm`

---

## âœ… Ð’Ñ‹Ð²Ð¾Ð´Ñ‹ Ð´Ð»Ñ Ð½Ð°ÑˆÐµÐ³Ð¾ C++ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

### 1. Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ OID Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´Ñ‘Ð½

âœ… **SCN ÐÐ• Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð² OID** - Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¾:
- Ð’ config.json: `//siteId` Ð·Ð°ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½
- Ð’ ÐºÐ¾Ð´Ðµ: OID Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ Ð±ÐµÐ· SCN
- Ð’ Ñ‚ÐµÑÑ‚Ð°Ñ…: SET Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚ Ð±ÐµÐ· SCN

### 2. Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° SET Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹

âœ… **ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°:**
```javascript
[
  {oid: "1.3.6.1.4.1.13267.3.2.4.1", type: Integer, value: 3},  // operationMode = 3 (remote)
  {oid: "1.3.6.1.4.1.13267.3.2.4.2.1.5", type: OctetString, value: Buffer.of(bit_mask)}  // Ñ„Ð°Ð·Ð°
]
```

### 3. Ð‘Ð¸Ñ‚Ð¾Ð²Ñ‹Ðµ Ð¼Ð°ÑÐºÐ¸ Ñ„Ð°Ð·

âœ… **Ð¤Ð¾Ñ€Ð¼ÑƒÐ»Ð° Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð°Ñ:**
```javascript
value = Buffer.of(1 << (phase - 1))
// Ð¤Ð°Ð·Ð° 1: 0x01 (Ð±Ð¸Ñ‚ 0)
// Ð¤Ð°Ð·Ð° 2: 0x02 (Ð±Ð¸Ñ‚ 1)
// Ð¤Ð°Ð·Ð° 3: 0x04 (Ð±Ð¸Ñ‚ 2)
// ...
```

### 4. Ð ÐµÐ¶Ð¸Ð¼Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹

âœ… **Ð ÐµÐ¶Ð¸Ð¼Ñ‹:**
- `0` - Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ
- `3` - ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ð¾Ðµ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ UTC

### 5. OID Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ

âœ… **ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ OID:**
- `1.3.6.1.4.1.13267.3.2.4.1` - Operation Mode (Integer)
- `1.3.6.1.4.1.13267.3.2.4.2.1.5` - Control Fn / Phase (OctetString)
- `1.3.6.1.4.1.13267.3.2.4.2.1.11` - Control LO / Lamps (Integer)
- `1.3.6.1.4.1.13267.3.2.4.2.1.20` - Control FF / Flash (Integer)

âœ… **OID Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ:**
- `1.3.6.1.4.1.13267.3.2.5.1.1.3` - Reply Gn / Current Stage (OctetString)
- `1.3.6.1.4.1.13267.3.2.5.1.1.36` - Reply FR / Regime (Integer)

---

## ðŸŽ¯ Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

### Ð”Ð»Ñ Ð½Ð°ÑˆÐµÐ³Ð¾ C++ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°:

1. âœ… **ÐšÐ¾Ð´ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾** - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ OID Ð±ÐµÐ· SCN
2. âœ… **Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° SET Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð°Ñ** - operationMode + Ñ†ÐµÐ»ÐµÐ²Ð¾Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚
3. âœ… **Ð‘Ð¸Ñ‚Ð¾Ð²Ñ‹Ðµ Ð¼Ð°ÑÐºÐ¸ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ðµ** - Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ð° `1 << (phase - 1)`

### Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð½Ð°Ð±Ð»ÑŽÐ´ÐµÐ½Ð¸Ñ:

1. **snmp_agent** - ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ð¹ SNMP Ð°Ð³ÐµÐ½Ñ‚ Ñ Ð²Ñ‹ÑÐ¾ÐºÐ¾Ð¹ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¾Ð¹ CPU
   - Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾, Ð¾Ð½ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ SNMP Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ðº ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ñƒ
   - ÐœÐ¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ð¾Ð»ÐµÐ·Ð½Ð¾ Ð¸Ð·ÑƒÑ‡Ð¸Ñ‚ÑŒ ÐµÐ³Ð¾ Ð»Ð¾Ð³Ð¸

2. **resident** - Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð°
   - ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð»Ð¾Ð³Ð¸ÐºÑƒ ÑÐ²ÐµÑ‚Ð¾Ñ„Ð¾Ñ€Ð°
   - Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° CPU (88.8%)

3. **ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð½Ð° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð°Ð´Ñ€ÐµÑ:**
   - `addr: "127.0.0.1"` - Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ spectr_utmc Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾
   - SNMP Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð¸Ð´ÑƒÑ‚ Ðº Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ snmp_agent

---

## ðŸ“š ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð´Ð»Ñ Ð´Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐµÐ³Ð¾ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°

1. `/home/voicelink/scripts/spectr_utmc/spectr_utmc.js` - Ð¸ÑÑ…Ð¾Ð´Ð½Ñ‹Ð¹ ÐºÐ¾Ð´ Ð¼Ð¾ÑÑ‚Ð° (Ð¼Ð¸Ð½Ð¸Ñ„Ð¸Ñ†Ð¸Ñ€Ð¾Ð²Ð°Ð½)
2. `/home/voicelink/rtc/snmp_agent/` - ÐºÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ð¹ SNMP Ð°Ð³ÐµÐ½Ñ‚
3. `/home/voicelink/rtc/resident/` - Ñ€ÐµÐ·Ð¸Ð´ÐµÐ½Ñ‚Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð°
4. `/etc/snmp/snmp.conf` - ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ SNMP
5. `/etc/systemd/system/spectr_utmc.service` - systemd unit

---

**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°:** âœ… Ð—Ð°Ð²ÐµÑ€ÑˆÑ‘Ð½  
**Ð¡Ð¾Ð³Ð»Ð°ÑÐ¾Ð²Ð°Ð½Ð½Ð¾ÑÑ‚ÑŒ Ñ Ð½Ð°ÑˆÐ¸Ð¼ ÐºÐ¾Ð´Ð¾Ð¼:** âœ… ÐŸÐ¾Ð»Ð½Ð°Ñ
