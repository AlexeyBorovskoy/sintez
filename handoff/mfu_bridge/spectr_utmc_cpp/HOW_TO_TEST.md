# Как тестировать (кратко)

Эта папка (`spectr_utmc_cpp/`) содержит C++ исходники и утилиты для диагностики протокола/контроллера.  
Если вы тестируете именно МФУ и `.ipk`, начните с `../README.md` и `../CHECKLIST.md`.

## Быстрый старт (ПК, Linux x86_64)

1. Сборка:

```bash
cmake -S . -B build
cmake --build build -j
```

2. Проверка SNMP связности до контроллера (прямой SNMP, если доступен из вашей сети):

```bash
./build/test_controller connect 192.168.75.150 UTMC
```

3. Упрощенный интерактивный тест:

```bash
./test_connection.sh
```

4. Пошаговые проверки (ping/порты/community/sysUpTime/traps):

```bash
./run_test_step.sh 0.1
./run_test_step.sh 0.2
./run_test_step.sh 1.1
./run_test_step.sh full
```

## Проверка ЖМ “как на стенде” (SSH + локальный SNMP на контроллере)

В тестовом контуре устойчивый способ включать ЖМ был через выполнение `snmpget/snmpset` локально на контроллере (127.0.0.1) по SSH.

Готовый сценарий в комплекте лежит выше, в `../tools/`:

- `../tools/yf_scripted_test.sh --confirm` (снимает логи + формирует MD-отчет)

## Что сохранять в отчет

- время и сценарий действий;
- `config.json` (секреты замаскировать);
- логи:
  - на МФУ: `logread`
  - с контроллера: захват через `../tools/dk_capture.sh` или выводы сценарных скриптов из `../tools/`.

